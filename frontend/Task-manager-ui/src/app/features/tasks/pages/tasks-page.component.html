<div class="min-h-screen bg-gradient-to-br from-slate-100 to-slate-200 py-10">
  <div class="max-w-5xl mx-auto px-6">

    <!-- Title -->
    <h1 class="text-4xl font-extrabold text-slate-800 mb-10 text-center tracking-tight">
      My Tasks
    </h1>

    <!-- Add Task Card -->
    <div class="bg-white/90 backdrop-blur rounded-2xl shadow-xl p-6 mb-10">
      <app-add-task (taskAdded)="onTaskAdded($event)"></app-add-task>
    </div>

    <!-- Dashboard -->
    <app-dashboard *ngIf="!loading" [tasks]="tasks"></app-dashboard>

    <!-- Filter Board -->
    <div class="flex justify-center gap-3 my-10">
      <button
        *ngFor="let f of filterOptions"
        type="button"
        (click)="activeFilter = f"
        class="px-5 py-2 rounded-full text-sm font-semibold transition-all duration-200 shadow-sm"
        [ngClass]="{
          'bg-slate-900 text-white scale-105 shadow-lg': activeFilter === f,
          'bg-white text-slate-600 hover:bg-slate-100': activeFilter !== f
        }"
      >
        {{ f }}
      </button>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="flex justify-center mt-20">
      <div class="animate-spin rounded-full h-12 w-12 border-b-4 border-slate-700"></div>
    </div>

    <!-- Error -->
    <div *ngIf="error" class="text-center text-red-600 mt-6 font-medium">
      {{ error }}
    </div>

    <!-- Task List -->
    <div *ngIf="!loading && filteredTasks.length > 0" class="space-y-5">
      <div
        *ngFor="let task of filteredTasks"
        class="group flex justify-between items-center p-5 bg-white rounded-2xl shadow-md border-l-8 transition-all duration-200 hover:shadow-xl hover:-translate-y-0.5"
        [ngClass]="{
          'border-yellow-400': task.status === 'ToDo',
          'border-blue-500': task.status === 'InProgress',
          'border-green-500': task.status === 'Done'
        }"
      >

        <!-- Task Info -->
        <div>
          <div class="flex items-center gap-2">
            <p class="font-semibold text-xl text-slate-800 group-hover:text-black">
              {{ task.title }}
            </p>

            <!-- Reminder -->
            <span
              *ngIf="task.reminderEnabled"
              class="inline-flex items-center px-2 py-0.5 text-xs rounded-full bg-purple-100 text-purple-700"
              title="Reminder enabled"
            >
              ðŸ”” Reminder
            </span>
          </div>

          <p class="text-sm text-slate-500 mt-1">
            Due: {{ task.dueDate | date:'dd MMM yyyy, hh:mm a' }}
          </p>

          <!-- Status Badge -->
          <span
            class="inline-block mt-3 px-3 py-1 text-xs font-semibold rounded-full"
            [ngClass]="{
              'bg-yellow-100 text-yellow-800': task.status === 'ToDo',
              'bg-blue-100 text-blue-800': task.status === 'InProgress',
              'bg-green-100 text-green-800': task.status === 'Done'
            }"
          >
            {{ task.status }}
          </span>
        </div>

        <!-- Actions -->
        <div class="flex gap-2">
          <button
            *ngIf="task.status === 'ToDo'"
            type="button"
            (click)="changeStatus(task.id, 'InProgress')"
            class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white shadow"
          >
            â–¶ Start
          </button>

          <button
            *ngIf="task.status === 'InProgress'"
            type="button"
            (click)="changeStatus(task.id, 'Done')"
            class="px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white shadow"
          >
            âœ“ Complete
          </button>

          <button
            type="button"
            (click)="deleteTask(task.id)"
            class="px-4 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white shadow"
          >
            ðŸ—‘ Delete
          </button>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div
      *ngIf="!loading && filteredTasks.length === 0"
      class="text-center text-slate-500 mt-20"
    >
      <p class="text-2xl">No tasks yet</p>
      <p class="mt-2">Add your first task above</p>
    </div>

  </div>
</div>
